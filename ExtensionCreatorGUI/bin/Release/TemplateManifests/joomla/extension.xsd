<?xml version="1.0" encoding="utf-8"?>
<xs:schema
	attributeFormDefault="unqualified"
	elementFormDefault="qualified"
	xmlns:tm="http://www.templatemaker.org/2012/schema"
	targetNamespace="http://www.templatemaker.org/2012/schema"
	xmlns:xs="http://www.w3.org/2001/XMLSchema">
	<!-- TODO: - define config and taskClass elements. 
	          - maybe create a sample extension file, since currently this schema file
	           can't be instantiated. -->
	<!-- TODO: use the unique schema element to specify unique elements. -->
	<xs:element
		name="extension">
		<xs:complexType>
			<xs:sequence>
				<xs:element
					name="parameters"
					type="tm:mainParameters" />
				<xs:element
					name="tasks">
                    <xs:annotation>
                    	<xs:documentation>Ordering of tasks matters, the tasks are run in document order.</xs:documentation>
                    </xs:annotation>
                    <xs:complexType>
						<xs:sequence 
							 	minOccurs="0"
								maxOccurs="unbounded">
							<xs:element
								name="task"
								type="tm:task" />
						</xs:sequence>
					</xs:complexType>
				</xs:element>
			</xs:sequence>
			<xs:attribute
				name="title"
				type="xs:string"
				use="required" />
		</xs:complexType>
	</xs:element>

    <xs:complexType name="parameters" abstract="true">
    	<!--<xs:sequence>
    		<xs:any />
    	</xs:sequence>-->
    </xs:complexType>
  <!--    <xs:element name="parameters" type="tm:parameters">
    	 <xs:unique name="uniqueParameterNames">
			  <xs:selector xpath="*"/>
			  <xs:field xpath="@name"/>
		 </xs:unique>
    </xs:element> -->
   <xs:complexType name="mainParameters" abstract="true">
   		<xs:complexContent>
   			<xs:extension base="tm:parameters">
   			</xs:extension>
   		</xs:complexContent>
    </xs:complexType>
	<!-- TODO: not in use -->
	<xs:complexType name="category">
		<xs:choice>
			<xs:any />
		</xs:choice>
 		<xs:attribute name="name" type="xs:string" use="required" />
	</xs:complexType>
  <!-- TODO: how to make sure category elements don't have text? -->
  <xs:attribute name="isCategory" type="xs:boolean">
    <xs:annotation>
      <xs:documentation>
        Indicates if a parameter element is a category. If this is true, then this element will
        be used as a namespace serparator.
      </xs:documentation>
    </xs:annotation>
  </xs:attribute>
  	<xs:complexType name="task" abstract="true">
       <!-- Note to inheritors: If you have task specific parameters, 
            include the parameters element within the task element
            and derive it from the tm:parameters complex type.  -->
    </xs:complexType>
</xs:schema>