<?xml version="1.0" encoding="utf-8"?>
<xs:schema
	attributeFormDefault="unqualified"
	elementFormDefault="qualified"
	xmlns:xs="http://www.w3.org/2001/XMLSchema"
	xmlns:tm="http://www.templatemaker.org/2012/schema"
	xmlns:j="http://www.templatemaker.org/2012/joomla/schema"
	targetNamespace="http://www.templatemaker.org/2012/joomla/schema">
    <xs:import  namespace="http://www.templatemaker.org/2012/schema"
    			schemaLocation="extension.xsd" />
    <xs:annotation>
    	<xs:appinfo>
	 		<tm:config>
				<templateClass>JComponent</templateClass>
				<assemblyFile>JoomlaLibrary.dll</assemblyFile>
				<extensionPrefix>com</extensionPrefix>
				<extensionType>component</extensionType>
				<scriptLanguage>VisualBasic</scriptLanguage>
			</tm:config>   		
    	</xs:appinfo>
    </xs:annotation>
    <!-- TODO: can use string simple type restrictions to make sure, names are valid.
    see the answer here: http://stackoverflow.com/questions/4793575/how-to-restrict-an-element-to-be-non-empty-through-xsd  -->
	<xs:complexType name="componentParameters">
		<xs:complexContent>
			<xs:extension base="tm:mainParameters">
				<xs:sequence>
					<xs:element
						name="component">
						<xs:complexType>
							<xs:sequence>
								<xs:element
									name="label"
									type="xs:string" />
								<xs:element
									name="description"
									type="xs:string" />
								<xs:element
									name="defaultView"
									type="xs:string"
									minOccurs="0" />
								<xs:element
									name="package"
									type="xs:string"
									minOccurs="0" />
								<xs:element
									name="profile"
									type="j:profile" />
								<xs:element
									name="database"
									type="j:database" />
							</xs:sequence>
						</xs:complexType>
					</xs:element>
				</xs:sequence>
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>
	<xs:complexType name="profile">
	   <xs:sequence>
	        <xs:element name="author" type="xs:string"/>
	        <xs:element name="authorEmail" type="xs:string"/>
	        <xs:element name="authorUrl" type="xs:string"/>
	        <xs:element name="copyright" type="xs:string"/>
	        <xs:element name="license" type="xs:string"/>
	   </xs:sequence>
	</xs:complexType>
    <xs:complexType name="database">
      <xs:sequence>
        <xs:element name="databaseName" type="xs:string"/>
        <xs:element name="server" type="xs:string"/>
        <xs:element name="userid" type="xs:string"/>
        <xs:element name="password" type="xs:string"/>
        <xs:element name="tablePrefix" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
<!--	<xs:element
		name="extension">
		<xs:complexType>
			<xs:sequence>
				<xs:element
					name="parameters">
					<xs:complexType>
						<xs:sequence>
							<xs:element
								maxOccurs="unbounded"
								name="loadTemplate">
								<xs:complexType>
									<xs:attribute
										name="from"
										type="xs:string"
										use="required" />
									<xs:attribute
										name="select"
										type="xs:string"
										use="required" />
								</xs:complexType>
							</xs:element>
							<xs:element
								name="site"
								type="xs:string" />
							<xs:element
								name="templateFiles"
								type="xs:string" />
						</xs:sequence>
					</xs:complexType>
				</xs:element>
				<xs:element
					name="tasks">
					<xs:complexType>
						<xs:sequence>
							<xs:element
								maxOccurs="unbounded"
								name="task">
								<xs:complexType>
									<xs:sequence
										minOccurs="0">
										<xs:element
											name="parameters">
											<xs:complexType>
												<xs:sequence>
													<xs:element
														minOccurs="0"
														name="name"
														type="xs:string" />
													<xs:element
														minOccurs="0"
														name="table"
														type="xs:string" />
													<xs:element
														minOccurs="0"
														name="nameObject"
														type="xs:string" />
													<xs:element
														minOccurs="0"
														name="message"
														type="xs:string" />
													<xs:element
														minOccurs="0"
														name="nameObjectList"
														type="xs:string" />
													<xs:element
														minOccurs="0"
														name="canEdit"
														type="xs:boolean" />
													<xs:element
														minOccurs="0"
														name="canCreate"
														type="xs:boolean" />
													<xs:element
														minOccurs="0"
														name="menu">
														<xs:complexType>
															<xs:sequence>
																<xs:element
																	name="menu"
																	type="xs:string" />
															</xs:sequence>
														</xs:complexType>
													</xs:element>
												</xs:sequence>
											</xs:complexType>
										</xs:element>
									</xs:sequence>
									<xs:attribute
										name="name"
										type="xs:string"
										use="required" />
								</xs:complexType>
							</xs:element>
						</xs:sequence>
					</xs:complexType>
				</xs:element>
				<xs:element
					name="loadTemplate">
					<xs:complexType>
						<xs:attribute
							name="from"
							type="xs:string"
							use="required" />
						<xs:attribute
							name="select"
							type="xs:string"
							use="required" />
					</xs:complexType>
				</xs:element>
			</xs:sequence>
			<xs:attribute
				name="title"
				type="xs:string"
				use="required" />
		</xs:complexType>
	</xs:element>-->

 	 <xs:complexType name="SiteForm">
        <xs:annotation>
        	<xs:appinfo>
        		<tm:taskClass>JSiteForm</tm:taskClass>
        	</xs:appinfo>
        </xs:annotation>
        <xs:complexContent>
    		<xs:extension base="tm:task">
				<xs:sequence minOccurs="1" maxOccurs="1">
					<xs:element name="parameters">
						<xs:complexType>
							<xs:sequence>
								<xs:element name="table" type="xs:string">
									<xs:annotation>
										<xs:documentation>Make sure not to include the table prefix in the table field. For example, if the table prefix is 'jos_', leave that out.</xs:documentation>
									</xs:annotation>
								</xs:element>
								<xs:element name="nameObject" type="xs:string"/>
								<xs:element name="nameObjectList" type="xs:string"/>
								<!-- TODO: check if we make these minOccurs="0", if they will be added in as defaults
								           during schema validation.  -->
								<xs:element name="tableAlias" type="xs:string" default="a"/>
								<xs:element name="canEdit" type="xs:boolean" default="true">
									<xs:annotation>
										<xs:documentation>Add the create buttons to the admin interface?</xs:documentation>
									</xs:annotation></xs:element>
								<xs:element name="canCreate" type="xs:boolean" default="true">
									<xs:annotation>
										<xs:documentation>Add the edit buttons to the admin interface?</xs:documentation>
									</xs:annotation></xs:element>
								<xs:element minOccurs="0" name="menu">
									<xs:complexType>
										<xs:sequence>
											<xs:element
												name="menu"
												type="xs:string" />
										</xs:sequence>
									</xs:complexType>
								</xs:element>
							</xs:sequence>
						</xs:complexType>
					</xs:element>
				</xs:sequence>   			
    		</xs:extension>
    	</xs:complexContent>
    </xs:complexType> 

    <xs:complexType name="DatabaseToAdminConnector">
        <xs:annotation>
        	<xs:appinfo>
        		<tm:taskClass>JDatabaseToAdminConnector</tm:taskClass>
        	</xs:appinfo>
        </xs:annotation>
        <xs:complexContent>
    		<xs:extension base="tm:task">
				<xs:sequence minOccurs="1" maxOccurs="1">
					<xs:element name="parameters">
					    <xs:complexType>
					    	<xs:complexContent>
					    		<xs:extension base="tm:parameters">
									<xs:sequence>
										<xs:element name="table" type="xs:string">
											<xs:annotation>
												<xs:documentation>Make sure not to include the table prefix in the table field. For example, if the table prefix is 'jos_', leave that out.</xs:documentation>
											</xs:annotation>
										</xs:element>
										<xs:element name="nameObject" type="xs:string"/>
										<xs:element name="nameObjectList" type="xs:string"/>
										<!-- TODO: check if we make these minOccurs="0", if they will be added in as defaults
										           during schema validation.  -->
										<xs:element name="tableAlias" type="xs:string" default="a"/>
										<xs:element name="canEdit" type="xs:boolean" default="true">
											<xs:annotation>
												<xs:documentation>Add the create buttons to the admin interface?</xs:documentation>
											</xs:annotation>
										</xs:element>
										<xs:element name="canCreate" type="xs:boolean" default="true">
											<xs:annotation>
												<xs:documentation>Add the edit buttons to the admin interface?</xs:documentation>
											</xs:annotation></xs:element>
										<xs:element minOccurs="0" name="menu">
											<xs:complexType>
												<xs:sequence>
													<xs:element
														name="menu"
														type="xs:string" />
												</xs:sequence>
											</xs:complexType>
										</xs:element>
									</xs:sequence>   			
					    		</xs:extension>
					    	</xs:complexContent>
					    </xs:complexType>					
					</xs:element>
				</xs:sequence>   			
    		</xs:extension>
    	</xs:complexContent>
    </xs:complexType>
</xs:schema>
